{{! Tab button for req pages }}
<div class="tab-bar collapse">
    <button class="tab-btn tab-btn-active" target="req_create">Yêu cầu cấp phép</button>
    <button class="tab-btn" target="req_update">Yêu cầu cập nhật</button>
</div>

{{! Toolbar section }}
<div class="toolbar">

    <form class="col-lg-4 mb-3 mb-lg-0 me-lg-3" role="search" onsubmit="(e)=>{e.preventDefault()}">
        <input type="search" class="form-control" placeholder="Search..." id="keyword" aria-label="Search"
            oninput="search(this.value)" required />
    </form>
    <select id="typeSelect" class="form-select" aria-label="Default select example">
        <option selected>Loại Vị Trí</option>
        <option value="1">Đất Công</option>
        <option value="2">Hành Lang An Toàn Giao Thông</option>
        <option value="3">Công Viên</option>
        <option value="4">Nhà Riêng</option>
    </select>
    <select id="methodSelect" class="form-select" aria-label="Default select example"
        onchange="filterByMethod(this.value)">
        <option selected>Hình Thức</option>
        <option value="1">Cổ Động Chính Trị</option>
        <option value="2">Quảng Cáo Thương Mại</option>
        <option value="3">Xã Hội Hoá</option>
    </select>
    <select id="statusSelect" class="form-select" aria-label="Default select example"
        onchange="filterByStatus(this.value)">
        <option selected>Trạng Thái</option>
        <option value="1">Đã Quy Hoạch</option>
        <option value="2">Chưa Quy Hoạch</option>
    </select>

    <button class="" id="new_location_btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#location_create"
        aria-controls="location_create">
        <i class="bi bi-plus-circle"></i>
        Tạo mới
    </button>

</div>

{{>new_table table_data=table1}}

{{!Collapsible table for req create}}
{{>new_collapsible_row table_data=table2}}

{{! section for req update }}
<div id="req_update" class="collapse">
    <div class="accordion accordion-flush" id="allRequest">
        <div class="accordion-item">
            <div class="accordion-header" id="reqCreate-heading">
                <button class="accordion-button req-accordion-header" type="button" data-bs-toggle="collapse"
                    data-bs-target="#reqCreate-collapse" aria-expanded="true" aria-controls="allRequest"
                    style="border: 0px; box-shadow: none; background-color: rgb(249, 250, 253);">
                    Yêu cầu chưa được xử lý
                </button>
            </div>
            <div id="reqCreate-collapse" class="accordion-collapse show collapse" aria-labelledby="reqCreate-heading"
                data-bs-parent="#allRequest">
                <div class="accordion-body">
                    <div class="accordion" id="reqUpdateInProcess">
                        <div class="accordion-item">
                            <div class="accordion-header area-accordion-header" id="area1-heading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#area1-collapse" aria-expanded="true" aria-controls="area1-collapse"
                                    style="background-color: transparent; box-shadow: none;">
                                </button>
                                <h5>Quận 1</h5>
                                <span></span>
                                <p>Số lượng yêu cầu: 4</p>
                            </div>
                            <div id="area1-collapse" class="accordion-collapse collapse" aria-labelledby="area1-heading"
                                data-bs-parent="#reqUpdateInProcess">
                                <div class="accordion-body">
                                    {{>new_table table_data=table3}}
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header area-accordion-header" id="area2-heading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#area2-collapse" aria-expanded="true" aria-controls="area2-collapse"
                                    style="background-color: transparent; box-shadow: none;">
                                </button>
                                <h5>Quận 8</h5>
                                <span></span>
                                <p>Số lượng yêu cầu: 4</p>
                            </div>
                            <div id="area2-collapse" class="accordion-collapse collapse" aria-labelledby="area2-heading"
                                data-bs-parent="#reqUpdateInProcess">
                                <div class="accordion-body">
                                    {{>new_table table_data=table4}}
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="accordion-item">
            <div class="accordion-header" id="reqUpdate-heading">
                <button class="accordion-button collapsed req-accordion-header" type="button" data-bs-toggle="collapse"
                    data-bs-target="#reqUpdate-collapse" aria-expanded="true" aria-controls="allRequest"
                    style="border: 0px; box-shadow: none; background-color: rgb(249, 250, 253);">
                    Yêu cầu đã được xử lý
                </button>
            </div>
            <div id="reqUpdate-collapse" class="accordion-collapse collapse" aria-labelledby="reqUpdate-heading"
                data-bs-parent="#allRequest">
                <div class="accordion-body">
                    <div class="accordion-body">
                        <div class="accordion" id="reqUpdateDone">
                            <div class="accordion-item">
                                <div class="accordion-header area-accordion-header" id="area1-heading">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#area1-collapse" aria-expanded="true"
                                        aria-controls="area1-collapse"
                                        style="background-color: transparent; box-shadow: none;">
                                    </button>
                                    <h5>Quận 1</h5>
                                    <span></span>
                                    <p>Số lượng yêu cầu: 4</p>
                                </div>
                                <div id="area1-collapse" class="accordion-collapse collapse"
                                    aria-labelledby="area1-heading" data-bs-parent="#reqUpdateDone">
                                    <div class="accordion-body">
                                        {{>new_table table_data=table3}}
                                    </div>
                                </div>
                            </div>

                            <div class="accordion-item">
                                <div class="accordion-header area-accordion-header" id="area2-heading">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#area2-collapse" aria-expanded="true"
                                        aria-controls="area2-collapse"
                                        style="background-color: transparent; box-shadow: none;">
                                    </button>
                                    <h5>Quận 8</h5>
                                    <span></span>
                                    <p>Số lượng yêu cầu: 4</p>
                                </div>
                                <div id="area2-collapse" class="accordion-collapse collapse"
                                    aria-labelledby="area2-heading" data-bs-parent="#reqUpdateDone">
                                    <div class="accordion-body">
                                        {{>new_table table_data=table4}}
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{{! Location-detail }}
<div class="offcanvas offcanvas-end sidepeek-location" data-bs-scroll="true" tabindex="-1" id="location_extend"
    aria-labelledby="Location extend information">
    <div class="offcanvas-header sidepeek-location-header">
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        <h5 class="offcanvas-title" id="location_extend_header">Thông tin chi
            tiết điểm đặt quảng cáo</h5>
    </div>
    <div class="offcanvas-body">
        <div class="fluid-container mb-3">
            <div class="row">
                <div class="col-5">
                    <div id="myCarousel" class="carousel slide mb-6"
                        style="border-radius: 10px; overflow: hidden; width: 100%" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="active"
                                aria-current="true" aria-label="Slide 1"></button>
                            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1"
                                aria-label="Slide 2"></button>
                            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2"
                                aria-label="Slide 3"></button>
                        </div>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="../../public/images/location3.png" class="h-100 w-100" alt="">

                            </div>
                            <div class="carousel-item">
                                <img src="../../public/images/location1.png" class="h-100 w-100" alt="">
                            </div>
                            <div class="carousel-item">
                                <img src="../../public/images/location2.png" class="h-100 w-100" alt="">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#myCarousel"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>

                <div class="col-7">
                    <table style="padding: 0;" id="info-ad-location" class="table" id="inf-table">
                        <tr>
                            <th><i class="bi bi-geo-alt"> Địa chỉ</i></th>
                            <td>47, Đ. Điện Biên Phủ, P. Đa Kao, Quận 1</td>
                        </tr>
                        <tr>
                            <th><i class="bi bi-hash"></i> Số lượng</th>
                            <td>2 bảng/điểm</td>
                        </tr>
                        <tr>
                            <th><i class="bi bi-tag"></i> Loại vị trí</th>
                            <td>Nhà riêng</td>
                        </tr>
                        <tr>
                            <th><i class="bi bi-activity"></i> Trạng thái</th>
                            <td>Chưa quy hoạch</td>
                        </tr>
                        <tr>
                            <th><i class="bi bi-bullseye"></i> Mục đích</th>
                            <td>Thương mại</td>
                        </tr>
                        <tr>
                            <th><i class="bi bi-boxes"></i> Loại bảng</th>
                            <td>2 bảng/điểm</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="ad-detail-info-container">
            <div class="table-container" id="{{table_data.table_id}}">
                <div class="table-header">
                    <table class="table">
                        <thead>
                            <tr>
                                {{#each table_data.heading}}
                                <th scope="col">{{this}}</th>
                                {{/each}}
                                <th scope="col" class="extend-btn"></th>
                            </tr>
                        </thead>
                    </table>
                </div>
                {{#each table_data.data_row}}
                <div class="table-row">
                    <table class="table">
                        <tr>
                            {{#each attributes}}
                            <td scope="row">{{this}}</td>
                            {{/each}}
                            {{#if status_col}}
                            <td>
                                <div class="table-status
                                    {{status_data.status_class}}">
                                    {{status_data.status_text}}
                                </div>
                            </td>
                            {{/if}}
                            <td class="extend-btn">
                                <button id="collapse-btn" class="btn" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#{{id}}" aria-expanded="false" aria-controls="{{id}}">
                                    <i class="bi bi-chevron-down"></i>
                                </button>
                            </td>
                        </tr>
                    </table>
                    <div class="collapse" id="{{id}}" style="width: 100%;">
                        <div class="collapsed-content">
                            Still coding...
                        </div>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
    </div>
</div>

{{! Location create }}
<div class="offcanvas offcanvas-end sidepeek-location" data-bs-scroll="true" tabindex="-1" id="location_create"
    aria-labelledby="Location extend information">
    <div class="offcanvas-header sidepeek-location-header">
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        <h5 class="offcanvas-title" id="location_create_header">Tạo điểm đặt
            quảng cáo mới</h5>
    </div>
    <div class="offcanvas-body">
        <div class="map-container" style="width: 100%; height: 15rem;">
            <div id="map">
                Waiting for map ...
            </div>
        </div>
        <form action="#" class="create-form">
            <div class="area-selection">
                <div class="form-field">
                    <label for="distict-selection">Quận</label>
                    <select id="district-selection">
                        <option selected>Chọn quận</option>
                        <option value="1">Quận 5</option>
                        <option value="2">Quận 8</option>
                    </select>
                </div>
                <div class="form-field">
                    <label for="ward-selection">Phường</label>
                    <select id="ward-selection">
                        <option selected>Chọn phường</option>
                        <option value="1">Phường 1</option>
                        <option value="2">Phường 2</option>
                        <option value="3">Phường 3</option>
                        <option value="4">Phường 4</option>
                        <option value="5">Phường 5</option>
                        <option value="6">Phường 6</option>
                        <option value="7">Phường 7</option>
                    </select>
                </div>
                <div class="form-field">
                    <label for="street">Đường</label>
                    <input type="text" id="street">
                </div>
            </div>
            <div class="ads-info">
                <div class="form-field-col">
                    <label for="location-type-selection">Loại ví trị</label>
                    <select id="location-type-selection">
                        <option selected>Chọn loại vị trí</option>
                        <option value="1">Nhà riêng</option>
                        <option value="2">Đất công</option>
                    </select>
                </div>
                <div class="form-field-col">
                    <label for="purpose-type-selection">Hình thức quảng cáo</label>
                    <select id="purpose-type-selection">
                        <option selected>Chọn hình thức quảng cáo</option>
                        <option value="1">Thương mại</option>
                        <option value="2">Cổ động chính trị</option>
                    </select>
                </div>
                <div class="ads-amount">
                    <label for="ads-amount">Số lượng</label>
                    <input type="number" id="ads-amount" min="1" max="10" placeholder="0">
                    <p>bảng / địa điểm</p>
                </div>
                <div class="ads-type">
                    <label for="ads-type">Loại bảng quảng cáo</label>
                    <select id="ads-type">
                        <option selected>Chọn loại bảng quảng cáo</option>
                        <option value="1">Trụ/cụm pano</option>
                        <option value="2">Băng rôn</option>
                        <option value="3">Màn hình led</option>
                    </select>
                </div>
                <div class="upload-field">
                    <label for="imgFile" class="drag-drop">
                        <input type="file" name="imgFile" id="imgFile" accept=".png, .jpeg, .gif" multiple hidden>
                
                        <div class="holder">
                            <i class="bi bi-cloud-arrow-up-fill"></i>
                            <h4>Kéo và thả ảnh vào đây</h4>
                            <p>hoặc</p>
                            <p>Click để duyệt file</p>
                        </div>
                    </label>
                    <div class="preview" style="display: none;">
                    </div>
                    </div>
            </div>
            <div class="submit-btn">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="offcanvas">Hủy</button>
                <button type="submit" class="btn btn-primary">Tạo mới</button>
            </div>
        </form>
    </div>
</div>



{{!-- Request update detail --}}

<div class="offcanvas offcanvas-end sidepeek-location" data-bs-scroll="true" tabindex="-1" id="update_detail"
    aria-labelledby="Location extend information">
    <div class="offcanvas-header sidepeek-location-header">
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        <h5 class="offcanvas-title" id="location_create_header">Chi tiết yêu cầu cập nhật</h5>
    </div>
    <div class="offcanvas-body">
        Mai code, mệt quãi
    </div>
</div>

{{!Script section }}
<script src="/public/js/department/ads_ui_controller.js"></script>
<script>
    setColumnWidths("req_create_table", ["10%", "10%", "20%", "20%", "10%", "10%", "10%", "10%"]);
    addContentToCollapsibleTable("req_create_table", generateCollapseDiv);
</script>